<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>إدخال البطاقة</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; background-color: #f7f7f7; }
  h2 { text-align: center; }
  form { background: #fff; padding: 20px; border-radius: 10px; max-width: 600px; margin: auto; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
  input, textarea, button { display: block; margin: 10px 0; padding: 10px; width: 100%; border-radius: 5px; border: 1px solid #ccc; }
  input[type='file'] { padding: 3px; }
  img { width: 150px; height: 150px; object-fit: cover; margin: 5px 0; border: 1px solid #aaa; }
  .img-group { display: flex; justify-content: space-between; gap: 10px; }
  .img-group div { flex: 1; }
</style>
</head>
<body>
<h2>إدخال بطاقة جديدة</h2>

<form id="cardForm">
  <label>رقم البطاقة:</label>
  <input type="text" id="cardNumber" placeholder="أدخل رقم البطاقة">

  <label>الاسم:</label>
  <input type="text" id="name" placeholder="أدخل الاسم">

  <label>رفع الصور (حتى 3 صور):</label>
  <div class="img-group">
    <div>
      <input type="file" id="image1" accept="image/*">
      <img id="preview1" src="">
    </div>
    <div>
      <input type="file" id="image2" accept="image/*">
      <img id="preview2" src="">
    </div>
    <div>
      <input type="file" id="image3" accept="image/*">
      <img id="preview3" src="">
    </div>
  </div>

  <label>الملاحظات:</label>
  <textarea id="notes" placeholder="أدخل الملاحظات"></textarea>

  <button type="submit">💾 إنشاء صفحة البطاقة</button>
</form>

<script>
function setupPreview(inputId, previewId){
  document.getElementById(inputId).addEventListener('change', function(e){
    const file = e.target.files[0];
    if(file){
      const reader = new FileReader();
      reader.onload = function(event){ document.getElementById(previewId).src = event.target.result; }
      reader.readAsDataURL(file);
    }
  });
}

setupPreview('image1','preview1');
setupPreview('image2','preview2');
setupPreview('image3','preview3');

function createImageHTML(src){
  return src ? `<img src="${src}" alt="صورة البطاقة" style='display:block; margin:10px auto; width:200px; height:200px; object-fit:cover; border:1px solid #aaa;'>` : '';
}

document.getElementById('cardForm').addEventListener('submit', function(e){
  e.preventDefault();
  const cardNumber = document.getElementById('cardNumber').value.trim();
  const name = document.getElementById('name').value.trim();
  const notes = document.getElementById('notes').value.trim();
  const imgs = [document.getElementById('preview1').src, document.getElementById('preview2').src, document.getElementById('preview3').src];

  const cardHTML = `<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>بطاقة ${cardNumber}</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; text-align:center; background-color:#f7f7f7; }
  .card-container { display:inline-block; background:#fff; padding:20px; border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,0.1); max-width:500px; }
  img { width:200px; height:200px; object-fit:cover; border:1px solid #aaa; margin:10px auto; display:block; }
  h2 { margin-bottom:10px; }
  p { font-size:16px; margin:5px 0; }
</style>
</head>
<body>
<div class="card-container">
<h2>بطاقة رقم: ${cardNumber}</h2>
${imgs.map(src => createImageHTML(src)).join('')}
<p><strong>الاسم:</strong> ${name}</p>
<p><strong>الملاحظات:</strong> ${notes}</p>
</div>
</body>
</html>`;

  const blob = new Blob([cardHTML], {type: 'text/html'});
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = `card-${cardNumber}.html`;
  link.click();

  alert('تم إنشاء صفحة البطاقة بنجاح ✅\nالملف تم تحميله على جهازك. الآن ارفعه إلى GitHub.');
  document.getElementById('cardForm').reset();
  ['preview1','preview2','preview3'].forEach(id => document.getElementById(id).src='');
});
</script>
</body>
</html>
